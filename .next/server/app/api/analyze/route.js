"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze/route";
exports.ids = ["app/api/analyze/route"];
exports.modules = {

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_pope_Downloads_SlowFlux_Codebase_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/analyze/route.ts */ \"(rsc)/./app/api/analyze/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze/route\",\n        pathname: \"/api/analyze\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze/route\"\n    },\n    resolvedPagePath: \"/Users/pope/Downloads/SlowFlux-Codebase/app/api/analyze/route.ts\",\n    nextConfigOutput,\n    userland: _Users_pope_Downloads_SlowFlux_Codebase_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/analyze/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnBvcGUlMkZEb3dubG9hZHMlMkZTbG93Rmx1eC1Db2RlYmFzZSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZwb3BlJTJGRG93bmxvYWRzJTJGU2xvd0ZsdXgtQ29kZWJhc2UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2dCO0FBQzdGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8/NmZhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcG9wZS9Eb3dubG9hZHMvU2xvd0ZsdXgtQ29kZWJhc2UvYXBwL2FwaS9hbmFseXplL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXplL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYW5hbHl6ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYW5hbHl6ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9wb3BlL0Rvd25sb2Fkcy9TbG93Rmx1eC1Db2RlYmFzZS9hcHAvYXBpL2FuYWx5emUvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FuYWx5emUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/analyze/route.ts":
/*!**********************************!*\
  !*** ./app/api/analyze/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_ml_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/ml-model */ \"(rsc)/./lib/ml-model.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! util */ \"util\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\nconst execAsync = (0,util__WEBPACK_IMPORTED_MODULE_6__.promisify)(child_process__WEBPACK_IMPORTED_MODULE_5__.exec);\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-secret-key\";\nasync function getDigOutput(domain) {\n    const { stdout: aRecords } = await execAsync(`dig A +noadditional +noquestion +nocomments +nocmd +nostats ${domain}`);\n    const { stdout: nsRecords } = await execAsync(`dig NS +noadditional +noquestion +nocomments +nocmd +nostats ${domain}`);\n    return aRecords + nsRecords;\n}\nasync function POST(req) {\n    try {\n        const { digOutput, domain } = await req.json();\n        if (!digOutput && !domain) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Either dig output or domain is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get the authentication token from cookies\n        const authToken = (0,next_headers__WEBPACK_IMPORTED_MODULE_3__.cookies)().get(\"auth-token\");\n        if (!authToken) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        // Verify the token and extract the user ID\n        const { id: userId } = (0,jsonwebtoken__WEBPACK_IMPORTED_MODULE_4__.verify)(authToken.value, JWT_SECRET);\n        // If domain is provided, get the dig output\n        const finalDigOutput = domain ? await getDigOutput(domain) : digOutput;\n        // Analyze the domain using our ML model\n        const result = await (0,_lib_ml_model__WEBPACK_IMPORTED_MODULE_1__.analyzeDomain)(finalDigOutput);\n        // Store the result in the database\n        const db = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.initializeDb)();\n        const dbResult = await db.run(`INSERT INTO analysis_history \n       (user_id, domain, dig_output, result, a_records, ttl_value, ns_records, domain_length) \n       VALUES (?, ?, ?, ?, ?, ?, ?, ?)`, [\n            userId,\n            result.domain,\n            finalDigOutput,\n            result.prediction,\n            result.metrics.aRecords,\n            result.metrics.ttlValue,\n            result.metrics.nsRecords,\n            result.metrics.domainLength\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            id: dbResult.lastID,\n            ...result\n        });\n    } catch (error) {\n        console.error(\"Analysis error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to analyze domain\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FuYWx5emUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBMEM7QUFDSTtBQUNQO0FBQ0Q7QUFDRDtBQUNEO0FBQ0o7QUFFaEMsTUFBTU8sWUFBWUQsK0NBQVNBLENBQUNELCtDQUFJQTtBQUVoQyxNQUFNRyxhQUFhQyxRQUFRQyxHQUFHLENBQUNGLFVBQVUsSUFBSTtBQUU3QyxlQUFlRyxhQUFhQyxNQUFjO0lBQ3hDLE1BQU0sRUFBRUMsUUFBUUMsUUFBUSxFQUFFLEdBQUcsTUFBTVAsVUFBVSxDQUFDLDREQUE0RCxFQUFFSyxPQUFPLENBQUM7SUFDcEgsTUFBTSxFQUFFQyxRQUFRRSxTQUFTLEVBQUUsR0FBRyxNQUFNUixVQUFVLENBQUMsNkRBQTZELEVBQUVLLE9BQU8sQ0FBQztJQUN0SCxPQUFPRSxXQUFXQztBQUNwQjtBQUVPLGVBQWVDLEtBQUtDLEdBQVk7SUFDckMsSUFBSTtRQUNGLE1BQU0sRUFBRUMsU0FBUyxFQUFFTixNQUFNLEVBQUUsR0FBRyxNQUFNSyxJQUFJRSxJQUFJO1FBRTVDLElBQUksQ0FBQ0QsYUFBYSxDQUFDTixRQUFRO1lBQ3pCLE9BQU9aLHFEQUFZQSxDQUFDbUIsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUEwQyxHQUNuRDtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsNENBQTRDO1FBQzVDLE1BQU1DLFlBQVluQixxREFBT0EsR0FBR29CLEdBQUcsQ0FBQztRQUNoQyxJQUFJLENBQUNELFdBQVc7WUFDZCxPQUFPdEIscURBQVlBLENBQUNtQixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQTBCLEdBQ25DO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSwyQ0FBMkM7UUFDM0MsTUFBTSxFQUFFRyxJQUFJQyxNQUFNLEVBQUUsR0FBR3JCLG9EQUFNQSxDQUFDa0IsVUFBVUksS0FBSyxFQUFFbEI7UUFFL0MsNENBQTRDO1FBQzVDLE1BQU1tQixpQkFBaUJmLFNBQVMsTUFBTUQsYUFBYUMsVUFBVU07UUFFN0Qsd0NBQXdDO1FBQ3hDLE1BQU1VLFNBQVMsTUFBTTNCLDREQUFhQSxDQUFDMEI7UUFFbkMsbUNBQW1DO1FBQ25DLE1BQU1FLEtBQUssTUFBTTNCLHFEQUFZQTtRQUM3QixNQUFNNEIsV0FBVyxNQUFNRCxHQUFHRSxHQUFHLENBQzNCLENBQUM7O3NDQUUrQixDQUFDLEVBQ2pDO1lBQ0VOO1lBQ0FHLE9BQU9oQixNQUFNO1lBQ2JlO1lBQ0FDLE9BQU9JLFVBQVU7WUFDakJKLE9BQU9LLE9BQU8sQ0FBQ25CLFFBQVE7WUFDdkJjLE9BQU9LLE9BQU8sQ0FBQ0MsUUFBUTtZQUN2Qk4sT0FBT0ssT0FBTyxDQUFDbEIsU0FBUztZQUN4QmEsT0FBT0ssT0FBTyxDQUFDRSxZQUFZO1NBQzVCO1FBR0gsT0FBT25DLHFEQUFZQSxDQUFDbUIsSUFBSSxDQUFDO1lBQ3ZCSyxJQUFJTSxTQUFTTSxNQUFNO1lBQ25CLEdBQUdSLE1BQU07UUFDWDtJQUNGLEVBQUUsT0FBT1IsT0FBTztRQUNkaUIsUUFBUWpCLEtBQUssQ0FBQyxtQkFBbUJBO1FBQ2pDLE9BQU9wQixxREFBWUEsQ0FBQ21CLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUEyQixHQUNwQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9hcHAvYXBpL2FuYWx5emUvcm91dGUudHM/NDZiYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGFuYWx5emVEb21haW4gfSBmcm9tICdAL2xpYi9tbC1tb2RlbCdcbmltcG9ydCB7IGluaXRpYWxpemVEYiB9IGZyb20gJ0AvbGliL2RiJ1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycydcbmltcG9ydCB7IHZlcmlmeSB9IGZyb20gJ2pzb253ZWJ0b2tlbidcbmltcG9ydCB7IGV4ZWMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJ1xuaW1wb3J0IHsgcHJvbWlzaWZ5IH0gZnJvbSAndXRpbCdcblxuY29uc3QgZXhlY0FzeW5jID0gcHJvbWlzaWZ5KGV4ZWMpXG5cbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICd5b3VyLXNlY3JldC1rZXknXG5cbmFzeW5jIGZ1bmN0aW9uIGdldERpZ091dHB1dChkb21haW46IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHsgc3Rkb3V0OiBhUmVjb3JkcyB9ID0gYXdhaXQgZXhlY0FzeW5jKGBkaWcgQSArbm9hZGRpdGlvbmFsICtub3F1ZXN0aW9uICtub2NvbW1lbnRzICtub2NtZCArbm9zdGF0cyAke2RvbWFpbn1gKVxuICBjb25zdCB7IHN0ZG91dDogbnNSZWNvcmRzIH0gPSBhd2FpdCBleGVjQXN5bmMoYGRpZyBOUyArbm9hZGRpdGlvbmFsICtub3F1ZXN0aW9uICtub2NvbW1lbnRzICtub2NtZCArbm9zdGF0cyAke2RvbWFpbn1gKVxuICByZXR1cm4gYVJlY29yZHMgKyBuc1JlY29yZHNcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkaWdPdXRwdXQsIGRvbWFpbiB9ID0gYXdhaXQgcmVxLmpzb24oKVxuICAgIFxuICAgIGlmICghZGlnT3V0cHV0ICYmICFkb21haW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0VpdGhlciBkaWcgb3V0cHV0IG9yIGRvbWFpbiBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBhdXRoZW50aWNhdGlvbiB0b2tlbiBmcm9tIGNvb2tpZXNcbiAgICBjb25zdCBhdXRoVG9rZW4gPSBjb29raWVzKCkuZ2V0KCdhdXRoLXRva2VuJylcbiAgICBpZiAoIWF1dGhUb2tlbikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIFZlcmlmeSB0aGUgdG9rZW4gYW5kIGV4dHJhY3QgdGhlIHVzZXIgSURcbiAgICBjb25zdCB7IGlkOiB1c2VySWQgfSA9IHZlcmlmeShhdXRoVG9rZW4udmFsdWUsIEpXVF9TRUNSRVQpIGFzIHsgaWQ6IG51bWJlciB9XG5cbiAgICAvLyBJZiBkb21haW4gaXMgcHJvdmlkZWQsIGdldCB0aGUgZGlnIG91dHB1dFxuICAgIGNvbnN0IGZpbmFsRGlnT3V0cHV0ID0gZG9tYWluID8gYXdhaXQgZ2V0RGlnT3V0cHV0KGRvbWFpbikgOiBkaWdPdXRwdXRcblxuICAgIC8vIEFuYWx5emUgdGhlIGRvbWFpbiB1c2luZyBvdXIgTUwgbW9kZWxcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXplRG9tYWluKGZpbmFsRGlnT3V0cHV0KVxuICAgIFxuICAgIC8vIFN0b3JlIHRoZSByZXN1bHQgaW4gdGhlIGRhdGFiYXNlXG4gICAgY29uc3QgZGIgPSBhd2FpdCBpbml0aWFsaXplRGIoKVxuICAgIGNvbnN0IGRiUmVzdWx0ID0gYXdhaXQgZGIucnVuKFxuICAgICAgYElOU0VSVCBJTlRPIGFuYWx5c2lzX2hpc3RvcnkgXG4gICAgICAgKHVzZXJfaWQsIGRvbWFpbiwgZGlnX291dHB1dCwgcmVzdWx0LCBhX3JlY29yZHMsIHR0bF92YWx1ZSwgbnNfcmVjb3JkcywgZG9tYWluX2xlbmd0aCkgXG4gICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KWAsXG4gICAgICBbXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgcmVzdWx0LmRvbWFpbixcbiAgICAgICAgZmluYWxEaWdPdXRwdXQsXG4gICAgICAgIHJlc3VsdC5wcmVkaWN0aW9uLFxuICAgICAgICByZXN1bHQubWV0cmljcy5hUmVjb3JkcyxcbiAgICAgICAgcmVzdWx0Lm1ldHJpY3MudHRsVmFsdWUsXG4gICAgICAgIHJlc3VsdC5tZXRyaWNzLm5zUmVjb3JkcyxcbiAgICAgICAgcmVzdWx0Lm1ldHJpY3MuZG9tYWluTGVuZ3RoXG4gICAgICBdXG4gICAgKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIGlkOiBkYlJlc3VsdC5sYXN0SUQsXG4gICAgICAuLi5yZXN1bHRcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FuYWx5c2lzIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gYW5hbHl6ZSBkb21haW4nIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImFuYWx5emVEb21haW4iLCJpbml0aWFsaXplRGIiLCJjb29raWVzIiwidmVyaWZ5IiwiZXhlYyIsInByb21pc2lmeSIsImV4ZWNBc3luYyIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiZ2V0RGlnT3V0cHV0IiwiZG9tYWluIiwic3Rkb3V0IiwiYVJlY29yZHMiLCJuc1JlY29yZHMiLCJQT1NUIiwicmVxIiwiZGlnT3V0cHV0IiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiYXV0aFRva2VuIiwiZ2V0IiwiaWQiLCJ1c2VySWQiLCJ2YWx1ZSIsImZpbmFsRGlnT3V0cHV0IiwicmVzdWx0IiwiZGIiLCJkYlJlc3VsdCIsInJ1biIsInByZWRpY3Rpb24iLCJtZXRyaWNzIiwidHRsVmFsdWUiLCJkb21haW5MZW5ndGgiLCJsYXN0SUQiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/analyze/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __awaiter = (void 0) && (void 0).__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (void 0) && (void 0).__generator || function(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n        },\n        trys: [],\n        ops: []\n    }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n        return this;\n    }), g;\n    function verb(n) {\n        return function(v) {\n            return step([\n                n,\n                v\n            ]);\n        };\n    }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while(g && (g = 0, op[0] && (_ = 0)), _)try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [\n                op[0] & 2,\n                t.value\n            ];\n            switch(op[0]){\n                case 0:\n                case 1:\n                    t = op;\n                    break;\n                case 4:\n                    _.label++;\n                    return {\n                        value: op[1],\n                        done: false\n                    };\n                case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [\n                        0\n                    ];\n                    continue;\n                case 7:\n                    op = _.ops.pop();\n                    _.trys.pop();\n                    continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                        _ = 0;\n                        continue;\n                    }\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                        _.label = op[1];\n                        break;\n                    }\n                    if (op[0] === 6 && _.label < t[1]) {\n                        _.label = t[1];\n                        t = op;\n                        break;\n                    }\n                    if (t && _.label < t[2]) {\n                        _.label = t[2];\n                        _.ops.push(op);\n                        break;\n                    }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop();\n                    continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) {\n            op = [\n                6,\n                e\n            ];\n            y = 0;\n        } finally{\n            f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n        };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.initializeDb = initializeDb;\nexports.createUser = createUser;\nexports.verifyUser = verifyUser;\nvar sqlite3 = __webpack_require__(/*! sqlite3 */ \"sqlite3\");\nvar sqlite_1 = __webpack_require__(/*! sqlite */ \"(rsc)/./node_modules/sqlite/build/index.js\");\nvar bcrypt_1 = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n// Extend the database initialization\nfunction initializeDb() {\n    return __awaiter(this, void 0, void 0, function() {\n        var db;\n        return __generator(this, function(_a) {\n            switch(_a.label){\n                case 0:\n                    return [\n                        4 /*yield*/ ,\n                        (0, sqlite_1.open)({\n                            filename: \"./slowflux.db\",\n                            driver: sqlite3.Database\n                        })\n                    ];\n                case 1:\n                    db = _a.sent();\n                    return [\n                        4 /*yield*/ ,\n                        db.exec(\"\\n    CREATE TABLE IF NOT EXISTS users (\\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\\n      username TEXT UNIQUE NOT NULL,\\n      password TEXT NOT NULL,\\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\\n    );\\n\\n    CREATE TABLE IF NOT EXISTS analysis_history (\\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\\n      user_id INTEGER NOT NULL,\\n      domain TEXT NOT NULL,\\n      dig_output TEXT NOT NULL,\\n      result TEXT NOT NULL,\\n      a_records INTEGER NOT NULL,\\n      ttl_value INTEGER NOT NULL,\\n      ns_records INTEGER NOT NULL,\\n      domain_length INTEGER NOT NULL,\\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\\n      FOREIGN KEY (user_id) REFERENCES users(id)\\n    );\\n\\n    CREATE TABLE IF NOT EXISTS feedback (\\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\\n      user_id INTEGER NOT NULL,\\n      analysis_id INTEGER NOT NULL,\\n      type TEXT NOT NULL,\\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\\n      FOREIGN KEY (user_id) REFERENCES users(id),\\n      FOREIGN KEY (analysis_id) REFERENCES analysis_history(id)\\n    );\\n\\n    CREATE TABLE IF NOT EXISTS whitelisted_domains (\\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\\n      domain TEXT UNIQUE NOT NULL,\\n      reason TEXT,\\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\\n    );\\n\\n    -- Insert default whitelisted domains\\n    INSERT OR IGNORE INTO whitelisted_domains (domain, reason) VALUES \\n    ('google.com', 'Legitimate load balancer configuration');\\n  \")\n                    ];\n                case 2:\n                    _a.sent();\n                    return [\n                        2 /*return*/ ,\n                        db\n                    ];\n            }\n        });\n    });\n}\nfunction createUser(username, password) {\n    return __awaiter(this, void 0, void 0, function() {\n        var db, hashedPassword, error_1;\n        return __generator(this, function(_a) {\n            switch(_a.label){\n                case 0:\n                    return [\n                        4 /*yield*/ ,\n                        initializeDb()\n                    ];\n                case 1:\n                    db = _a.sent();\n                    return [\n                        4 /*yield*/ ,\n                        (0, bcrypt_1.hash)(password, 10)\n                    ];\n                case 2:\n                    hashedPassword = _a.sent();\n                    _a.label = 3;\n                case 3:\n                    _a.trys.push([\n                        3,\n                        5,\n                        ,\n                        6\n                    ]);\n                    return [\n                        4 /*yield*/ ,\n                        db.run(\"INSERT INTO users (username, password) VALUES (?, ?)\", [\n                            username,\n                            hashedPassword\n                        ])\n                    ];\n                case 4:\n                    _a.sent();\n                    return [\n                        2 /*return*/ ,\n                        true\n                    ];\n                case 5:\n                    error_1 = _a.sent();\n                    if (error_1.code === \"SQLITE_CONSTRAINT\") {\n                        return [\n                            2 /*return*/ ,\n                            false\n                        ]; // Username already exists\n                    }\n                    throw error_1;\n                case 6:\n                    return [\n                        2 /*return*/ \n                    ];\n            }\n        });\n    });\n}\nfunction verifyUser(username, password) {\n    return __awaiter(this, void 0, void 0, function() {\n        var db, user, valid;\n        return __generator(this, function(_a) {\n            switch(_a.label){\n                case 0:\n                    return [\n                        4 /*yield*/ ,\n                        initializeDb()\n                    ];\n                case 1:\n                    db = _a.sent();\n                    return [\n                        4 /*yield*/ ,\n                        db.get(\"SELECT * FROM users WHERE username = ?\", username)\n                    ];\n                case 2:\n                    user = _a.sent();\n                    if (!user) {\n                        return [\n                            2 /*return*/ ,\n                            null\n                        ];\n                    }\n                    return [\n                        4 /*yield*/ ,\n                        (0, bcrypt_1.compare)(password, user.password)\n                    ];\n                case 3:\n                    valid = _a.sent();\n                    if (!valid) {\n                        return [\n                            2 /*return*/ ,\n                            null\n                        ];\n                    }\n                    return [\n                        2 /*return*/ ,\n                        {\n                            id: user.id,\n                            username: user.username\n                        }\n                    ];\n            }\n        });\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRO3dCQUFJOzRCQUFFRyxJQUFJSixLQUFLSSxFQUFFOzRCQUFFWCxVQUFVTyxLQUFLUCxRQUFRO3dCQUFDO3FCQUFFO1lBQ3ZFO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9kYi5qcz8zZGM5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaW5pdGlhbGl6ZURiID0gaW5pdGlhbGl6ZURiO1xuZXhwb3J0cy5jcmVhdGVVc2VyID0gY3JlYXRlVXNlcjtcbmV4cG9ydHMudmVyaWZ5VXNlciA9IHZlcmlmeVVzZXI7XG52YXIgc3FsaXRlMyA9IHJlcXVpcmUoXCJzcWxpdGUzXCIpO1xudmFyIHNxbGl0ZV8xID0gcmVxdWlyZShcInNxbGl0ZVwiKTtcbnZhciBiY3J5cHRfMSA9IHJlcXVpcmUoXCJiY3J5cHRcIik7XG4vLyBFeHRlbmQgdGhlIGRhdGFiYXNlIGluaXRpYWxpemF0aW9uXG5mdW5jdGlvbiBpbml0aWFsaXplRGIoKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGI7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBzcWxpdGVfMS5vcGVuKSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogJy4vc2xvd2ZsdXguZGInLFxuICAgICAgICAgICAgICAgICAgICAgICAgZHJpdmVyOiBzcWxpdGUzLkRhdGFiYXNlXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYi5leGVjKFwiXFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHVzZXJzIChcXG4gICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXFxuICAgICAgdXNlcm5hbWUgVEVYVCBVTklRVUUgTk9UIE5VTEwsXFxuICAgICAgcGFzc3dvcmQgVEVYVCBOT1QgTlVMTCxcXG4gICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcXG4gICAgKTtcXG5cXG4gICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgYW5hbHlzaXNfaGlzdG9yeSAoXFxuICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxcbiAgICAgIHVzZXJfaWQgSU5URUdFUiBOT1QgTlVMTCxcXG4gICAgICBkb21haW4gVEVYVCBOT1QgTlVMTCxcXG4gICAgICBkaWdfb3V0cHV0IFRFWFQgTk9UIE5VTEwsXFxuICAgICAgcmVzdWx0IFRFWFQgTk9UIE5VTEwsXFxuICAgICAgYV9yZWNvcmRzIElOVEVHRVIgTk9UIE5VTEwsXFxuICAgICAgdHRsX3ZhbHVlIElOVEVHRVIgTk9UIE5VTEwsXFxuICAgICAgbnNfcmVjb3JkcyBJTlRFR0VSIE5PVCBOVUxMLFxcbiAgICAgIGRvbWFpbl9sZW5ndGggSU5URUdFUiBOT1QgTlVMTCxcXG4gICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXFxuICAgICAgRk9SRUlHTiBLRVkgKHVzZXJfaWQpIFJFRkVSRU5DRVMgdXNlcnMoaWQpXFxuICAgICk7XFxuXFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGZlZWRiYWNrIChcXG4gICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXFxuICAgICAgdXNlcl9pZCBJTlRFR0VSIE5PVCBOVUxMLFxcbiAgICAgIGFuYWx5c2lzX2lkIElOVEVHRVIgTk9UIE5VTEwsXFxuICAgICAgdHlwZSBURVhUIE5PVCBOVUxMLFxcbiAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcXG4gICAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyhpZCksXFxuICAgICAgRk9SRUlHTiBLRVkgKGFuYWx5c2lzX2lkKSBSRUZFUkVOQ0VTIGFuYWx5c2lzX2hpc3RvcnkoaWQpXFxuICAgICk7XFxuXFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHdoaXRlbGlzdGVkX2RvbWFpbnMgKFxcbiAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcXG4gICAgICBkb21haW4gVEVYVCBVTklRVUUgTk9UIE5VTEwsXFxuICAgICAgcmVhc29uIFRFWFQsXFxuICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXFxuICAgICk7XFxuXFxuICAgIC0tIEluc2VydCBkZWZhdWx0IHdoaXRlbGlzdGVkIGRvbWFpbnNcXG4gICAgSU5TRVJUIE9SIElHTk9SRSBJTlRPIHdoaXRlbGlzdGVkX2RvbWFpbnMgKGRvbWFpbiwgcmVhc29uKSBWQUxVRVMgXFxuICAgICgnZ29vZ2xlLmNvbScsICdMZWdpdGltYXRlIGxvYWQgYmFsYW5jZXIgY29uZmlndXJhdGlvbicpO1xcbiAgXCIpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiLCBoYXNoZWRQYXNzd29yZCwgZXJyb3JfMTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW5pdGlhbGl6ZURiKCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgZGIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBiY3J5cHRfMS5oYXNoKShwYXNzd29yZCwgMTApXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGhhc2hlZFBhc3N3b3JkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzMsIDUsICwgNl0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYi5ydW4oJ0lOU0VSVCBJTlRPIHVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQpIFZBTFVFUyAoPywgPyknLCBbdXNlcm5hbWUsIGhhc2hlZFBhc3N3b3JkXSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdHJ1ZV07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JfMS5jb2RlID09PSAnU1FMSVRFX0NPTlNUUkFJTlQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZmFsc2VdOyAvLyBVc2VybmFtZSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yXzE7XG4gICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gdmVyaWZ5VXNlcih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYiwgdXNlciwgdmFsaWQ7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGluaXRpYWxpemVEYigpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYi5nZXQoJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/JywgdXNlcm5hbWUpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHVzZXIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG51bGxdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBiY3J5cHRfMS5jb21wYXJlKShwYXNzd29yZCwgdXNlci5wYXNzd29yZCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBudWxsXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgeyBpZDogdXNlci5pZCwgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUgfV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsImFkb3B0IiwidmFsdWUiLCJyZXNvbHZlIiwiUHJvbWlzZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsIl9fZ2VuZXJhdG9yIiwiYm9keSIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0IiwidHJ5cyIsIm9wcyIsImYiLCJ5IiwiZyIsIk9iamVjdCIsImNyZWF0ZSIsIkl0ZXJhdG9yIiwicHJvdG90eXBlIiwidmVyYiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibiIsInYiLCJvcCIsIlR5cGVFcnJvciIsImNhbGwiLCJwb3AiLCJsZW5ndGgiLCJwdXNoIiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwiaW5pdGlhbGl6ZURiIiwiY3JlYXRlVXNlciIsInZlcmlmeVVzZXIiLCJzcWxpdGUzIiwicmVxdWlyZSIsInNxbGl0ZV8xIiwiYmNyeXB0XzEiLCJkYiIsIl9hIiwib3BlbiIsImZpbGVuYW1lIiwiZHJpdmVyIiwiRGF0YWJhc2UiLCJleGVjIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiZXJyb3JfMSIsImhhc2giLCJydW4iLCJjb2RlIiwidXNlciIsInZhbGlkIiwiZ2V0IiwiY29tcGFyZSIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.js\n");

/***/ }),

/***/ "(rsc)/./lib/ml-model.ts":
/*!*************************!*\
  !*** ./lib/ml-model.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MLServiceError: () => (/* binding */ MLServiceError),\n/* harmony export */   analyzeDomain: () => (/* binding */ analyzeDomain)\n/* harmony export */ });\nconst ML_SERVICE_URL = \"http://localhost:8000\";\nclass MLServiceError extends Error {\n    constructor(message){\n        super(message);\n        this.name = \"MLServiceError\";\n    }\n}\nasync function analyzeDomain(digOutput) {\n    try {\n        const response = await fetch(`${ML_SERVICE_URL}/analyze`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                dig_output: digOutput\n            })\n        });\n        if (!response.ok) {\n            const error = await response.json();\n            throw new MLServiceError(error.detail || \"Analysis failed\");\n        }\n        return response.json();\n    } catch (error) {\n        if (error instanceof MLServiceError) {\n            throw error;\n        }\n        if (error instanceof TypeError && error.message.includes(\"fetch\")) {\n            throw new MLServiceError(\"ML service is not available. Please ensure the Python service is running.\");\n        }\n        throw new MLServiceError(\"An unexpected error occurred during analysis\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbWwtbW9kZWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFQSxNQUFNQSxpQkFBaUI7QUFFaEIsTUFBTUMsdUJBQXVCQztJQUNsQ0MsWUFBWUMsT0FBZSxDQUFFO1FBQzNCLEtBQUssQ0FBQ0E7UUFDTixJQUFJLENBQUNDLElBQUksR0FBRztJQUNkO0FBQ0Y7QUFFTyxlQUFlQyxjQUFjQyxTQUFpQjtJQUNuRCxJQUFJO1FBQ0YsTUFBTUMsV0FBVyxNQUFNQyxNQUFNLENBQUMsRUFBRVQsZUFBZSxRQUFRLENBQUMsRUFBRTtZQUN4RFUsUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGdCQUFnQjtZQUNsQjtZQUNBQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7Z0JBQUVDLFlBQVlSO1lBQVU7UUFDL0M7UUFFQSxJQUFJLENBQUNDLFNBQVNRLEVBQUUsRUFBRTtZQUNoQixNQUFNQyxRQUFRLE1BQU1ULFNBQVNVLElBQUk7WUFDakMsTUFBTSxJQUFJakIsZUFBZWdCLE1BQU1FLE1BQU0sSUFBSTtRQUMzQztRQUVBLE9BQU9YLFNBQVNVLElBQUk7SUFDdEIsRUFBRSxPQUFPRCxPQUFPO1FBQ2QsSUFBSUEsaUJBQWlCaEIsZ0JBQWdCO1lBQ25DLE1BQU1nQjtRQUNSO1FBRUEsSUFBSUEsaUJBQWlCRyxhQUFhSCxNQUFNYixPQUFPLENBQUNpQixRQUFRLENBQUMsVUFBVTtZQUNqRSxNQUFNLElBQUlwQixlQUFlO1FBQzNCO1FBRUEsTUFBTSxJQUFJQSxlQUFlO0lBQzNCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vbGliL21sLW1vZGVsLnRzP2Q5YjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBBbmFseXNpc1Jlc3VsdCB9IGZyb20gJ0AvdHlwZXMvYW5hbHlzaXMnXG5cbmNvbnN0IE1MX1NFUlZJQ0VfVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCdcblxuZXhwb3J0IGNsYXNzIE1MU2VydmljZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlKVxuICAgIHRoaXMubmFtZSA9ICdNTFNlcnZpY2VFcnJvcidcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYW5hbHl6ZURvbWFpbihkaWdPdXRwdXQ6IHN0cmluZyk6IFByb21pc2U8QW5hbHlzaXNSZXN1bHQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke01MX1NFUlZJQ0VfVVJMfS9hbmFseXplYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBkaWdfb3V0cHV0OiBkaWdPdXRwdXQgfSksXG4gICAgfSlcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICB0aHJvdyBuZXcgTUxTZXJ2aWNlRXJyb3IoZXJyb3IuZGV0YWlsIHx8ICdBbmFseXNpcyBmYWlsZWQnKVxuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNTFNlcnZpY2VFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gICAgXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVHlwZUVycm9yICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykpIHtcbiAgICAgIHRocm93IG5ldyBNTFNlcnZpY2VFcnJvcignTUwgc2VydmljZSBpcyBub3QgYXZhaWxhYmxlLiBQbGVhc2UgZW5zdXJlIHRoZSBQeXRob24gc2VydmljZSBpcyBydW5uaW5nLicpXG4gICAgfVxuICAgIFxuICAgIHRocm93IG5ldyBNTFNlcnZpY2VFcnJvcignQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCBkdXJpbmcgYW5hbHlzaXMnKVxuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJNTF9TRVJWSUNFX1VSTCIsIk1MU2VydmljZUVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJuYW1lIiwiYW5hbHl6ZURvbWFpbiIsImRpZ091dHB1dCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkaWdfb3V0cHV0Iiwib2siLCJlcnJvciIsImpzb24iLCJkZXRhaWwiLCJUeXBlRXJyb3IiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/ml-model.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/sqlite","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();