"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/feedback/route";
exports.ids = ["app/api/feedback/route"];
exports.modules = {

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffeedback%2Froute&page=%2Fapi%2Ffeedback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffeedback%2Froute.ts&appDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffeedback%2Froute&page=%2Fapi%2Ffeedback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffeedback%2Froute.ts&appDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_pope_Downloads_SlowFlux_Codebase_app_api_feedback_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/feedback/route.ts */ \"(rsc)/./app/api/feedback/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/feedback/route\",\n        pathname: \"/api/feedback\",\n        filename: \"route\",\n        bundlePath: \"app/api/feedback/route\"\n    },\n    resolvedPagePath: \"/Users/pope/Downloads/SlowFlux-Codebase/app/api/feedback/route.ts\",\n    nextConfigOutput,\n    userland: _Users_pope_Downloads_SlowFlux_Codebase_app_api_feedback_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/feedback/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZmZWVkYmFjayUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZmVlZGJhY2slMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZmZWVkYmFjayUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnBvcGUlMkZEb3dubG9hZHMlMkZTbG93Rmx1eC1Db2RlYmFzZSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZwb3BlJTJGRG93bmxvYWRzJTJGU2xvd0ZsdXgtQ29kZWJhc2UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8/NWM3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcG9wZS9Eb3dubG9hZHMvU2xvd0ZsdXgtQ29kZWJhc2UvYXBwL2FwaS9mZWVkYmFjay9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZmVlZGJhY2svcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9mZWVkYmFja1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZmVlZGJhY2svcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvcG9wZS9Eb3dubG9hZHMvU2xvd0ZsdXgtQ29kZWJhc2UvYXBwL2FwaS9mZWVkYmFjay9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZmVlZGJhY2svcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffeedback%2Froute&page=%2Fapi%2Ffeedback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffeedback%2Froute.ts&appDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/feedback/route.ts":
/*!***********************************!*\
  !*** ./app/api/feedback/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-secret-key\";\nasync function POST(req) {\n    try {\n        const { analysisId, type } = await req.json();\n        if (!analysisId || !type) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Analysis ID and feedback type are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get the authentication token from cookies\n        const authToken = (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)().get(\"auth-token\");\n        if (!authToken) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        // Verify the token and extract the user ID\n        const { id: userId } = (0,jsonwebtoken__WEBPACK_IMPORTED_MODULE_3__.verify)(authToken.value, JWT_SECRET);\n        // Store the feedback in the database\n        const db = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.initializeDb)();\n        await db.run(`INSERT OR REPLACE INTO feedback (user_id, analysis_id, type) VALUES (?, ?, ?)`, [\n            userId,\n            analysisId,\n            type\n        ]);\n        // Get updated counts\n        const positiveFeedbackCount = await db.get(\"SELECT COUNT(*) as count FROM feedback WHERE analysis_id = ? AND type = ?\", [\n            analysisId,\n            \"positive\"\n        ]);\n        const negativeFeedbackCount = await db.get(\"SELECT COUNT(*) as count FROM feedback WHERE analysis_id = ? AND type = ?\", [\n            analysisId,\n            \"negative\"\n        ]);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            positiveFeedbackCount: positiveFeedbackCount.count,\n            negativeFeedbackCount: negativeFeedbackCount.count\n        });\n    } catch (error) {\n        console.error(\"Feedback error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to submit feedback\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(req) {\n    const url = new URL(req.url);\n    const analysisId = url.searchParams.get(\"analysisId\");\n    if (!analysisId) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Analysis ID is required\"\n        }, {\n            status: 400\n        });\n    }\n    // Get the authentication token from cookies\n    const authToken = (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)().get(\"auth-token\");\n    if (!authToken) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Authentication required\"\n        }, {\n            status: 401\n        });\n    }\n    // Verify the token and extract the user ID\n    const { id: userId } = (0,jsonwebtoken__WEBPACK_IMPORTED_MODULE_3__.verify)(authToken.value, JWT_SECRET);\n    // Fetch the feedback from the database\n    const db = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.initializeDb)();\n    const feedback = await db.get(\"SELECT type FROM feedback WHERE user_id = ? AND analysis_id = ?\", [\n        userId,\n        analysisId\n    ]);\n    const positiveFeedbackCount = await db.get(\"SELECT COUNT(*) as count FROM feedback WHERE analysis_id = ? AND type = ?\", [\n        analysisId,\n        \"positive\"\n    ]);\n    const negativeFeedbackCount = await db.get(\"SELECT COUNT(*) as count FROM feedback WHERE analysis_id = ? AND type = ?\", [\n        analysisId,\n        \"negative\"\n    ]);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        feedback: feedback ? feedback.type : null,\n        positiveFeedbackCount: positiveFeedbackCount.count,\n        negativeFeedbackCount: negativeFeedbackCount.count\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxDQUFDVyxJQUFJLENBQUM7UUFDdkJtQixVQUFVQSxXQUFXQSxTQUFTcEIsSUFBSSxHQUFHO1FBQ3JDVyx1QkFBdUJBLHNCQUFzQkcsS0FBSztRQUNsREYsdUJBQXVCQSxzQkFBc0JFLEtBQUs7SUFDcEQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9hcHAvYXBpL2ZlZWRiYWNrL3JvdXRlLnRzPzgxMzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBpbml0aWFsaXplRGIgfSBmcm9tICdAL2xpYi9kYidcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnXG5pbXBvcnQgeyB2ZXJpZnkgfSBmcm9tICdqc29ud2VidG9rZW4nXG5cbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICd5b3VyLXNlY3JldC1rZXknXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgYW5hbHlzaXNJZCwgdHlwZSB9ID0gYXdhaXQgcmVxLmpzb24oKVxuICAgIFxuICAgIGlmICghYW5hbHlzaXNJZCB8fCAhdHlwZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnQW5hbHlzaXMgSUQgYW5kIGZlZWRiYWNrIHR5cGUgYXJlIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZyb20gY29va2llc1xuICAgIGNvbnN0IGF1dGhUb2tlbiA9IGNvb2tpZXMoKS5nZXQoJ2F1dGgtdG9rZW4nKVxuICAgIGlmICghYXV0aFRva2VuKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gVmVyaWZ5IHRoZSB0b2tlbiBhbmQgZXh0cmFjdCB0aGUgdXNlciBJRFxuICAgIGNvbnN0IHsgaWQ6IHVzZXJJZCB9ID0gdmVyaWZ5KGF1dGhUb2tlbi52YWx1ZSwgSldUX1NFQ1JFVCkgYXMgeyBpZDogbnVtYmVyIH1cblxuICAgIC8vIFN0b3JlIHRoZSBmZWVkYmFjayBpbiB0aGUgZGF0YWJhc2VcbiAgICBjb25zdCBkYiA9IGF3YWl0IGluaXRpYWxpemVEYigpXG4gICAgYXdhaXQgZGIucnVuKFxuICAgICAgYElOU0VSVCBPUiBSRVBMQUNFIElOVE8gZmVlZGJhY2sgKHVzZXJfaWQsIGFuYWx5c2lzX2lkLCB0eXBlKSBWQUxVRVMgKD8sID8sID8pYCxcbiAgICAgIFt1c2VySWQsIGFuYWx5c2lzSWQsIHR5cGVdXG4gICAgKVxuXG4gICAgLy8gR2V0IHVwZGF0ZWQgY291bnRzXG4gICAgY29uc3QgcG9zaXRpdmVGZWVkYmFja0NvdW50ID0gYXdhaXQgZGIuZ2V0KFxuICAgICAgJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIGZlZWRiYWNrIFdIRVJFIGFuYWx5c2lzX2lkID0gPyBBTkQgdHlwZSA9ID8nLFxuICAgICAgW2FuYWx5c2lzSWQsICdwb3NpdGl2ZSddXG4gICAgKVxuICAgIGNvbnN0IG5lZ2F0aXZlRmVlZGJhY2tDb3VudCA9IGF3YWl0IGRiLmdldChcbiAgICAgICdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBmZWVkYmFjayBXSEVSRSBhbmFseXNpc19pZCA9ID8gQU5EIHR5cGUgPSA/JyxcbiAgICAgIFthbmFseXNpc0lkLCAnbmVnYXRpdmUnXVxuICAgIClcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICBwb3NpdGl2ZUZlZWRiYWNrQ291bnQ6IHBvc2l0aXZlRmVlZGJhY2tDb3VudC5jb3VudCwgXG4gICAgICBuZWdhdGl2ZUZlZWRiYWNrQ291bnQ6IG5lZ2F0aXZlRmVlZGJhY2tDb3VudC5jb3VudCBcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZlZWRiYWNrIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gc3VibWl0IGZlZWRiYWNrJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxOiBSZXF1ZXN0KSB7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxLnVybClcbiAgY29uc3QgYW5hbHlzaXNJZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdhbmFseXNpc0lkJylcblxuICBpZiAoIWFuYWx5c2lzSWQpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnQW5hbHlzaXMgSUQgaXMgcmVxdWlyZWQnIH0sXG4gICAgICB7IHN0YXR1czogNDAwIH1cbiAgICApXG4gIH1cblxuICAvLyBHZXQgdGhlIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZyb20gY29va2llc1xuICBjb25zdCBhdXRoVG9rZW4gPSBjb29raWVzKCkuZ2V0KCdhdXRoLXRva2VuJylcbiAgaWYgKCFhdXRoVG9rZW4pIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIH0sXG4gICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgIClcbiAgfVxuXG4gIC8vIFZlcmlmeSB0aGUgdG9rZW4gYW5kIGV4dHJhY3QgdGhlIHVzZXIgSURcbiAgY29uc3QgeyBpZDogdXNlcklkIH0gPSB2ZXJpZnkoYXV0aFRva2VuLnZhbHVlLCBKV1RfU0VDUkVUKSBhcyB7IGlkOiBudW1iZXIgfVxuXG4gIC8vIEZldGNoIHRoZSBmZWVkYmFjayBmcm9tIHRoZSBkYXRhYmFzZVxuICBjb25zdCBkYiA9IGF3YWl0IGluaXRpYWxpemVEYigpXG4gIGNvbnN0IGZlZWRiYWNrID0gYXdhaXQgZGIuZ2V0KFxuICAgICdTRUxFQ1QgdHlwZSBGUk9NIGZlZWRiYWNrIFdIRVJFIHVzZXJfaWQgPSA/IEFORCBhbmFseXNpc19pZCA9ID8nLFxuICAgIFt1c2VySWQsIGFuYWx5c2lzSWRdXG4gIClcblxuICBjb25zdCBwb3NpdGl2ZUZlZWRiYWNrQ291bnQgPSBhd2FpdCBkYi5nZXQoXG4gICAgJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIGZlZWRiYWNrIFdIRVJFIGFuYWx5c2lzX2lkID0gPyBBTkQgdHlwZSA9ID8nLFxuICAgIFthbmFseXNpc0lkLCAncG9zaXRpdmUnXVxuICApXG4gIGNvbnN0IG5lZ2F0aXZlRmVlZGJhY2tDb3VudCA9IGF3YWl0IGRiLmdldChcbiAgICAnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gZmVlZGJhY2sgV0hFUkUgYW5hbHlzaXNfaWQgPSA/IEFORCB0eXBlID0gPycsXG4gICAgW2FuYWx5c2lzSWQsICduZWdhdGl2ZSddXG4gIClcblxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICBmZWVkYmFjazogZmVlZGJhY2sgPyBmZWVkYmFjay50eXBlIDogbnVsbCxcbiAgICBwb3NpdGl2ZUZlZWRiYWNrQ291bnQ6IHBvc2l0aXZlRmVlZGJhY2tDb3VudC5jb3VudCxcbiAgICBuZWdhdGl2ZUZlZWRiYWNrQ291bnQ6IG5lZ2F0aXZlRmVlZGJhY2tDb3VudC5jb3VudFxuICB9KVxufVxuXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiaW5pdGlhbGl6ZURiIiwiY29va2llcyIsInZlcmlmeSIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiUE9TVCIsInJlcSIsImFuYWx5c2lzSWQiLCJ0eXBlIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiYXV0aFRva2VuIiwiZ2V0IiwiaWQiLCJ1c2VySWQiLCJ2YWx1ZSIsImRiIiwicnVuIiwicG9zaXRpdmVGZWVkYmFja0NvdW50IiwibmVnYXRpdmVGZWVkYmFja0NvdW50Iiwic3VjY2VzcyIsImNvdW50IiwiY29uc29sZSIsIkdFVCIsInVybCIsIlVSTCIsInNlYXJjaFBhcmFtcyIsImZlZWRiYWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/feedback/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __awaiter = (void 0) && (void 0).__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (void 0) && (void 0).__generator || function(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n        },\n        trys: [],\n        ops: []\n    }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n        return this;\n    }), g;\n    function verb(n) {\n        return function(v) {\n            return step([\n                n,\n                v\n            ]);\n        };\n    }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while(g && (g = 0, op[0] && (_ = 0)), _)try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [\n                op[0] & 2,\n                t.value\n            ];\n            switch(op[0]){\n                case 0:\n                case 1:\n                    t = op;\n                    break;\n                case 4:\n                    _.label++;\n                    return {\n                        value: op[1],\n                        done: false\n                    };\n                case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [\n                        0\n                    ];\n                    continue;\n                case 7:\n                    op = _.ops.pop();\n                    _.trys.pop();\n                    continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                        _ = 0;\n                        continue;\n                    }\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                        _.label = op[1];\n                        break;\n                    }\n                    if (op[0] === 6 && _.label < t[1]) {\n                        _.label = t[1];\n                        t = op;\n                        break;\n                    }\n                    if (t && _.label < t[2]) {\n                        _.label = t[2];\n                        _.ops.push(op);\n                        break;\n                    }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop();\n                    continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) {\n            op = [\n                6,\n                e\n            ];\n            y = 0;\n        } finally{\n            f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n        };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.initializeDb = initializeDb;\nexports.createUser = createUser;\nexports.verifyUser = verifyUser;\nvar sqlite3 = __webpack_require__(/*! sqlite3 */ \"sqlite3\");\nvar sqlite_1 = __webpack_require__(/*! sqlite */ \"(rsc)/./node_modules/sqlite/build/index.js\");\nvar bcrypt_1 = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n// Extend the database initialization\nfunction initializeDb() {\n    return __awaiter(this, void 0, void 0, function() {\n        var db;\n        return __generator(this, function(_a) {\n            switch(_a.label){\n                case 0:\n                    return [\n                        4 /*yield*/ ,\n                        (0, sqlite_1.open)({\n                            filename: \"./slowflux.db\",\n                            driver: sqlite3.Database\n                        })\n                    ];\n                case 1:\n                    db = _a.sent();\n                    return [\n                        4 /*yield*/ ,\n                        db.exec(\"\\n    CREATE TABLE IF NOT EXISTS users (\\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\\n      username TEXT UNIQUE NOT NULL,\\n      password TEXT NOT NULL,\\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\\n    );\\n\\n    CREATE TABLE IF NOT EXISTS analysis_history (\\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\\n      user_id INTEGER NOT NULL,\\n      domain TEXT NOT NULL,\\n      dig_output TEXT NOT NULL,\\n      result TEXT NOT NULL,\\n      a_records INTEGER NOT NULL,\\n      ttl_value INTEGER NOT NULL,\\n      ns_records INTEGER NOT NULL,\\n      domain_length INTEGER NOT NULL,\\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\\n      FOREIGN KEY (user_id) REFERENCES users(id)\\n    );\\n\\n    CREATE TABLE IF NOT EXISTS feedback (\\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\\n      user_id INTEGER NOT NULL,\\n      analysis_id INTEGER NOT NULL,\\n      type TEXT NOT NULL,\\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\\n      FOREIGN KEY (user_id) REFERENCES users(id),\\n      FOREIGN KEY (analysis_id) REFERENCES analysis_history(id)\\n    );\\n\\n    CREATE TABLE IF NOT EXISTS whitelisted_domains (\\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\\n      domain TEXT UNIQUE NOT NULL,\\n      reason TEXT,\\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\\n    );\\n\\n    -- Insert default whitelisted domains\\n    INSERT OR IGNORE INTO whitelisted_domains (domain, reason) VALUES \\n    ('google.com', 'Legitimate load balancer configuration');\\n  \")\n                    ];\n                case 2:\n                    _a.sent();\n                    return [\n                        2 /*return*/ ,\n                        db\n                    ];\n            }\n        });\n    });\n}\nfunction createUser(username, password) {\n    return __awaiter(this, void 0, void 0, function() {\n        var db, hashedPassword, error_1;\n        return __generator(this, function(_a) {\n            switch(_a.label){\n                case 0:\n                    return [\n                        4 /*yield*/ ,\n                        initializeDb()\n                    ];\n                case 1:\n                    db = _a.sent();\n                    return [\n                        4 /*yield*/ ,\n                        (0, bcrypt_1.hash)(password, 10)\n                    ];\n                case 2:\n                    hashedPassword = _a.sent();\n                    _a.label = 3;\n                case 3:\n                    _a.trys.push([\n                        3,\n                        5,\n                        ,\n                        6\n                    ]);\n                    return [\n                        4 /*yield*/ ,\n                        db.run(\"INSERT INTO users (username, password) VALUES (?, ?)\", [\n                            username,\n                            hashedPassword\n                        ])\n                    ];\n                case 4:\n                    _a.sent();\n                    return [\n                        2 /*return*/ ,\n                        true\n                    ];\n                case 5:\n                    error_1 = _a.sent();\n                    if (error_1.code === \"SQLITE_CONSTRAINT\") {\n                        return [\n                            2 /*return*/ ,\n                            false\n                        ]; // Username already exists\n                    }\n                    throw error_1;\n                case 6:\n                    return [\n                        2 /*return*/ \n                    ];\n            }\n        });\n    });\n}\nfunction verifyUser(username, password) {\n    return __awaiter(this, void 0, void 0, function() {\n        var db, user, valid;\n        return __generator(this, function(_a) {\n            switch(_a.label){\n                case 0:\n                    return [\n                        4 /*yield*/ ,\n                        initializeDb()\n                    ];\n                case 1:\n                    db = _a.sent();\n                    return [\n                        4 /*yield*/ ,\n                        db.get(\"SELECT * FROM users WHERE username = ?\", username)\n                    ];\n                case 2:\n                    user = _a.sent();\n                    if (!user) {\n                        return [\n                            2 /*return*/ ,\n                            null\n                        ];\n                    }\n                    return [\n                        4 /*yield*/ ,\n                        (0, bcrypt_1.compare)(password, user.password)\n                    ];\n                case 3:\n                    valid = _a.sent();\n                    if (!valid) {\n                        return [\n                            2 /*return*/ ,\n                            null\n                        ];\n                    }\n                    return [\n                        2 /*return*/ ,\n                        {\n                            id: user.id,\n                            username: user.username\n                        }\n                    ];\n            }\n        });\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRO3dCQUFJOzRCQUFFRyxJQUFJSixLQUFLSSxFQUFFOzRCQUFFWCxVQUFVTyxLQUFLUCxRQUFRO3dCQUFDO3FCQUFFO1lBQ3ZFO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9kYi5qcz8zZGM5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGcgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT09IFwiZnVuY3Rpb25cIiA/IEl0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpO1xuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaW5pdGlhbGl6ZURiID0gaW5pdGlhbGl6ZURiO1xuZXhwb3J0cy5jcmVhdGVVc2VyID0gY3JlYXRlVXNlcjtcbmV4cG9ydHMudmVyaWZ5VXNlciA9IHZlcmlmeVVzZXI7XG52YXIgc3FsaXRlMyA9IHJlcXVpcmUoXCJzcWxpdGUzXCIpO1xudmFyIHNxbGl0ZV8xID0gcmVxdWlyZShcInNxbGl0ZVwiKTtcbnZhciBiY3J5cHRfMSA9IHJlcXVpcmUoXCJiY3J5cHRcIik7XG4vLyBFeHRlbmQgdGhlIGRhdGFiYXNlIGluaXRpYWxpemF0aW9uXG5mdW5jdGlvbiBpbml0aWFsaXplRGIoKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGI7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBzcWxpdGVfMS5vcGVuKSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogJy4vc2xvd2ZsdXguZGInLFxuICAgICAgICAgICAgICAgICAgICAgICAgZHJpdmVyOiBzcWxpdGUzLkRhdGFiYXNlXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYi5leGVjKFwiXFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHVzZXJzIChcXG4gICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXFxuICAgICAgdXNlcm5hbWUgVEVYVCBVTklRVUUgTk9UIE5VTEwsXFxuICAgICAgcGFzc3dvcmQgVEVYVCBOT1QgTlVMTCxcXG4gICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcXG4gICAgKTtcXG5cXG4gICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgYW5hbHlzaXNfaGlzdG9yeSAoXFxuICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxcbiAgICAgIHVzZXJfaWQgSU5URUdFUiBOT1QgTlVMTCxcXG4gICAgICBkb21haW4gVEVYVCBOT1QgTlVMTCxcXG4gICAgICBkaWdfb3V0cHV0IFRFWFQgTk9UIE5VTEwsXFxuICAgICAgcmVzdWx0IFRFWFQgTk9UIE5VTEwsXFxuICAgICAgYV9yZWNvcmRzIElOVEVHRVIgTk9UIE5VTEwsXFxuICAgICAgdHRsX3ZhbHVlIElOVEVHRVIgTk9UIE5VTEwsXFxuICAgICAgbnNfcmVjb3JkcyBJTlRFR0VSIE5PVCBOVUxMLFxcbiAgICAgIGRvbWFpbl9sZW5ndGggSU5URUdFUiBOT1QgTlVMTCxcXG4gICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXFxuICAgICAgRk9SRUlHTiBLRVkgKHVzZXJfaWQpIFJFRkVSRU5DRVMgdXNlcnMoaWQpXFxuICAgICk7XFxuXFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGZlZWRiYWNrIChcXG4gICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXFxuICAgICAgdXNlcl9pZCBJTlRFR0VSIE5PVCBOVUxMLFxcbiAgICAgIGFuYWx5c2lzX2lkIElOVEVHRVIgTk9UIE5VTEwsXFxuICAgICAgdHlwZSBURVhUIE5PVCBOVUxMLFxcbiAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcXG4gICAgICBGT1JFSUdOIEtFWSAodXNlcl9pZCkgUkVGRVJFTkNFUyB1c2VycyhpZCksXFxuICAgICAgRk9SRUlHTiBLRVkgKGFuYWx5c2lzX2lkKSBSRUZFUkVOQ0VTIGFuYWx5c2lzX2hpc3RvcnkoaWQpXFxuICAgICk7XFxuXFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHdoaXRlbGlzdGVkX2RvbWFpbnMgKFxcbiAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcXG4gICAgICBkb21haW4gVEVYVCBVTklRVUUgTk9UIE5VTEwsXFxuICAgICAgcmVhc29uIFRFWFQsXFxuICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXFxuICAgICk7XFxuXFxuICAgIC0tIEluc2VydCBkZWZhdWx0IHdoaXRlbGlzdGVkIGRvbWFpbnNcXG4gICAgSU5TRVJUIE9SIElHTk9SRSBJTlRPIHdoaXRlbGlzdGVkX2RvbWFpbnMgKGRvbWFpbiwgcmVhc29uKSBWQUxVRVMgXFxuICAgICgnZ29vZ2xlLmNvbScsICdMZWdpdGltYXRlIGxvYWQgYmFsYW5jZXIgY29uZmlndXJhdGlvbicpO1xcbiAgXCIpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiLCBoYXNoZWRQYXNzd29yZCwgZXJyb3JfMTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW5pdGlhbGl6ZURiKCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgZGIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBiY3J5cHRfMS5oYXNoKShwYXNzd29yZCwgMTApXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGhhc2hlZFBhc3N3b3JkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzMsIDUsICwgNl0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYi5ydW4oJ0lOU0VSVCBJTlRPIHVzZXJzICh1c2VybmFtZSwgcGFzc3dvcmQpIFZBTFVFUyAoPywgPyknLCBbdXNlcm5hbWUsIGhhc2hlZFBhc3N3b3JkXSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdHJ1ZV07XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JfMS5jb2RlID09PSAnU1FMSVRFX0NPTlNUUkFJTlQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZmFsc2VdOyAvLyBVc2VybmFtZSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yXzE7XG4gICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gdmVyaWZ5VXNlcih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYiwgdXNlciwgdmFsaWQ7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGluaXRpYWxpemVEYigpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkYi5nZXQoJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/JywgdXNlcm5hbWUpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHVzZXIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG51bGxdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBiY3J5cHRfMS5jb21wYXJlKShwYXNzd29yZCwgdXNlci5wYXNzd29yZCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBudWxsXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgeyBpZDogdXNlci5pZCwgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUgfV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuIl0sIm5hbWVzIjpbIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsImFkb3B0IiwidmFsdWUiLCJyZXNvbHZlIiwiUHJvbWlzZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsIl9fZ2VuZXJhdG9yIiwiYm9keSIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0IiwidHJ5cyIsIm9wcyIsImYiLCJ5IiwiZyIsIk9iamVjdCIsImNyZWF0ZSIsIkl0ZXJhdG9yIiwicHJvdG90eXBlIiwidmVyYiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibiIsInYiLCJvcCIsIlR5cGVFcnJvciIsImNhbGwiLCJwb3AiLCJsZW5ndGgiLCJwdXNoIiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwiaW5pdGlhbGl6ZURiIiwiY3JlYXRlVXNlciIsInZlcmlmeVVzZXIiLCJzcWxpdGUzIiwicmVxdWlyZSIsInNxbGl0ZV8xIiwiYmNyeXB0XzEiLCJkYiIsIl9hIiwib3BlbiIsImZpbGVuYW1lIiwiZHJpdmVyIiwiRGF0YWJhc2UiLCJleGVjIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiZXJyb3JfMSIsImhhc2giLCJydW4iLCJjb2RlIiwidXNlciIsInZhbGlkIiwiZ2V0IiwiY29tcGFyZSIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/sqlite","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffeedback%2Froute&page=%2Fapi%2Ffeedback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffeedback%2Froute.ts&appDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpope%2FDownloads%2FSlowFlux-Codebase&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();